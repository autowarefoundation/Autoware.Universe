{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Parameters for start_planner",
  "type": "object",
  "definitions": {
    "start_planner": {
      "type": "object",
      "properties": {
        "th_arrived_distance": {
          "type": "number",
          "default": 1.0,
          "description": "Threshold distance to consider as arrived."
        },
        "th_stopped_velocity": {
          "type": "number",
          "default": 0.01,
          "description": "Threshold velocity to consider as stopped."
        },
        "th_stopped_time": {
          "type": "number",
          "default": 1.0,
          "description": "Time threshold to consider as stopped."
        },
        "collision_check_margins": {
          "type": "array",
          "items": {
            "type": "number"
          },
          "default": [2.0, 1.0, 0.5, 0.1],
          "description": "Margins for collision check."
        },
        "collision_check_margin_from_front_object": {
          "type": "number",
          "default": 5.0,
          "description": "Margin from front object for collision check."
        },
        "extra_width_margin_for_rear_obstacle": {
          "type": "number",
          "default": 0.5,
          "description": "Extra width margin for rear obstacle."
        },
        "th_moving_object_velocity": {
          "type": "number",
          "default": 1.0,
          "description": "Threshold velocity for moving object."
        },
        "object_types_to_check_for_path_generation": {
          "type": "object",
          "properties": {
            "check_car": { "type": "boolean", "default": true },
            "check_truck": { "type": "boolean", "default": true },
            "check_bus": { "type": "boolean", "default": true },
            "check_trailer": { "type": "boolean", "default": true },
            "check_bicycle": { "type": "boolean", "default": true },
            "check_motorcycle": { "type": "boolean", "default": true },
            "check_pedestrian": { "type": "boolean", "default": true },
            "check_unknown": { "type": "boolean", "default": true }
          },
          "description": "Object types to check for path generation."
        },
        "th_distance_to_middle_of_the_road": {
          "type": "number",
          "default": 0.5,
          "description": "Threshold distance to the middle of the road."
        },
        "center_line_path_interval": {
          "type": "number",
          "default": 1.0,
          "description": "Interval for the center line path."
        },
        "enable_shift_pull_out": {
          "type": "boolean",
          "default": true,
          "description": "Enable shift pull out."
        },
        "check_shift_path_lane_departure": {
          "type": "boolean",
          "default": true,
          "description": "Check shift path lane departure."
        },
        "allow_check_shift_path_lane_departure_override": {
          "type": "boolean",
          "default": false,
          "description": "Allow override for check shift path lane departure."
        },
        "shift_collision_check_distance_from_end": {
          "type": "number",
          "default": -10.0,
          "description": "Shift collision check distance from end."
        },
        "minimum_shift_pull_out_distance": {
          "type": "number",
          "default": 0.0,
          "description": "Minimum shift pull out distance."
        },
        "maximum_longitudinal_deviation": {
          "type": "number",
          "default": 1.0,
          "description": "Maximum longitudinal deviation."
        },
        "lateral_jerk": {
          "type": "number",
          "default": 0.5,
          "description": "Lateral jerk."
        },
        "lateral_acceleration_sampling_num": {
          "type": "number",
          "default": 3,
          "description": "Number of samples for lateral acceleration."
        },
        "minimum_lateral_acc": {
          "type": "number",
          "default": 0.15,
          "description": "Minimum lateral acceleration."
        },
        "maximum_lateral_acc": {
          "type": "number",
          "default": 0.5,
          "description": "Maximum lateral acceleration."
        },
        "maximum_curvature": {
          "type": "number",
          "default": 0.07,
          "description": "Maximum curvature."
        },
        "enable_geometric_pull_out": {
          "type": "boolean",
          "default": true,
          "description": "Enable geometric pull out."
        },
        "geometric_collision_check_distance_from_end": {
          "type": "number",
          "default": 0.0,
          "description": "Geometric collision check distance from end."
        },
        "arc_path_interval": {
          "type": "number",
          "default": 1.0,
          "description": "Interval for the arc path."
        },
        "divide_pull_out_path": {
          "type": "boolean",
          "default": true,
          "description": "Divide pull out path."
        },
        "geometric_pull_out_velocity": {
          "type": "number",
          "default": 1.0,
          "description": "Velocity for geometric pull out."
        },
        "lane_departure_margin": {
          "type": "number",
          "default": 0.2,
          "description": "Margin for lane departure."
        },
        "lane_departure_check_expansion_margin": {
          "type": "number",
          "default": 0.0,
          "description": "Expansion margin for lane departure check."
        },
        "backward_velocity": {
          "type": "number",
          "default": -1.0,
          "description": "Backward velocity."
        },
        "pull_out_max_steer_angle": {
          "type": "number",
          "default": 0.26,
          "description": "Maximum steer angle for pull out."
        },
        "enable_back": {
          "type": "boolean",
          "default": true,
          "description": "Enable back."
        },
        "search_priority": {
          "type": "string",
          "default": "efficient_path",
          "description": "Priority for search."
        },
        "max_back_distance": {
          "type": "number",
          "default": 20.0,
          "description": "Maximum back distance."
        },
        "backward_search_resolution": {
          "type": "number",
          "default": 2.0,
          "description": "Resolution for backward search."
        },
        "backward_path_update_duration": {
          "type": "number",
          "default": 3.0,
          "description": "Duration for backward path update."
        },
        "ignore_distance_from_lane_end": {
          "type": "number",
          "default": 15.0,
          "description": "Ignore distance from lane end."
        },
        "prepare_time_before_start": {
          "type": "number",
          "default": 0.0,
          "description": "Prepare time before start."
        },
        "freespace_planner": {
          "type": "object",
          "properties": {
            "enable_freespace_planner": { "type": "boolean", "default": true },
            "end_pose_search_start_distance": { "type": "number", "default": 20.0 },
            "end_pose_search_end_distance": { "type": "number", "default": 30.0 },
            "end_pose_search_interval": { "type": "number", "default": 2.0 },
            "freespace_planner_algorithm": { "type": "string", "default": "astar" },
            "velocity": { "type": "number", "default": 1.0 },
            "vehicle_shape_margin": { "type": "number", "default": 1.0 },
            "time_limit": { "type": "number", "default": 3000.0 },
            "minimum_turning_radius": { "type": "number", "default": 5.0 },
            "maximum_turning_radius": { "type": "number", "default": 5.0 },
            "turning_radius_size": { "type": "number", "default": 1 },
            "search_configs": {
              "type": "object",
              "properties": {
                "theta_size": { "type": "number", "default": 144 },
                "angle_goal_range": { "type": "number", "default": 6.0 },
                "curve_weight": { "type": "number", "default": 1.2 },
                "reverse_weight": { "type": "number", "default": 1.0 },
                "lateral_goal_range": { "type": "number", "default": 0.5 },
                "longitudinal_goal_range": { "type": "number", "default": 2.0 }
              }
            },
            "costmap_configs": {
              "type": "object",
              "properties": {
                "obstacle_threshold": { "type": "number", "default": 30 }
              }
            },
            "astar": {
              "type": "object",
              "properties": {
                "only_behind_solutions": { "type": "boolean", "default": false },
                "use_back": { "type": "boolean", "default": false },
                "distance_heuristic_weight": { "type": "number", "default": 1.0 }
              }
            },
            "rrtstar": {
              "type": "object",
              "properties": {
                "enable_update": { "type": "boolean", "default": true },
                "use_informed_sampling": { "type": "boolean", "default": true },
                "max_planning_time": { "type": "number", "default": 150.0 },
                "neighbor_radius": { "type": "number", "default": 8.0 },
                "margin": { "type": "number", "default": 1.0 }
              }
            }
          }
        },
        "stop_condition": {
          "type": "object",
          "properties": {
            "maximum_deceleration_for_stop": { "type": "number", "default": 1.0 },
            "maximum_jerk_for_stop": { "type": "number", "default": 1.0 }
          }
        },
        "path_safety_check": {
          "type": "object",
          "properties": {
            "ego_predicted_path": {
              "type": "object",
              "properties": {
                "min_velocity": { "type": "number", "default": 0.0 },
                "min_acceleration": { "type": "number", "default": 1.0 },
                "time_horizon_for_front_object": { "type": "number", "default": 10.0 },
                "time_horizon_for_rear_object": { "type": "number", "default": 10.0 },
                "time_resolution": { "type": "number", "default": 0.5 },
                "delay_until_departure": { "type": "number", "default": 1.0 }
              }
            },
            "target_filtering": {
              "type": "object",
              "properties": {
                "safety_check_time_horizon": { "type": "number", "default": 5.0 },
                "safety_check_time_resolution": { "type": "number", "default": 1.0 },
                "object_check_forward_distance": { "type": "number", "default": 10.0 },
                "object_check_backward_distance": { "type": "number", "default": 100.0 },
                "ignore_object_velocity_threshold": { "type": "number", "default": 1.0 },
                "object_types_to_check": {
                  "type": "object",
                  "properties": {
                    "check_car": { "type": "boolean", "default": true },
                    "check_truck": { "type": "boolean", "default": true },
                    "check_bus": { "type": "boolean", "default": true },
                    "check_trailer": { "type": "boolean", "default": true },
                    "check_bicycle": { "type": "boolean", "default": true },
                    "check_motorcycle": { "type": "boolean", "default": true },
                    "check_pedestrian": { "type": "boolean", "default": true },
                    "check_unknown": { "type": "boolean", "default": false }
                  }
                },
                "object_lane_configuration": {
                  "type": "object",
                  "properties": {
                    "check_current_lane": { "type": "boolean", "default": true },
                    "check_right_side_lane": { "type": "boolean", "default": true },
                    "check_left_side_lane": { "type": "boolean", "default": true },
                    "check_shoulder_lane": { "type": "boolean", "default": true },
                    "check_other_lane": { "type": "boolean", "default": false }
                  }
                },
                "include_opposite_lane": { "type": "boolean", "default": false },
                "invert_opposite_lane": { "type": "boolean", "default": false },
                "check_all_predicted_path": { "type": "boolean", "default": true },
                "use_all_predicted_path": { "type": "boolean", "default": true },
                "use_predicted_path_outside_lanelet": { "type": "boolean", "default": false }
              }
            },
            "safety_check_params": {
              "type": "object",
              "properties": {
                "enable_safety_check": { "type": "boolean", "default": true },
                "publish_debug_marker": { "type": "boolean", "default": false },
                "rss_params": {
                  "type": "object",
                  "properties": {
                    "rear_vehicle_reaction_time": { "type": "number", "default": 2.0 },
                    "rear_vehicle_safety_time_margin": { "type": "number", "default": 1.0 },
                    "lateral_distance_max_threshold": { "type": "number", "default": 2.0 },
                    "longitudinal_distance_min_threshold": { "type": "number", "default": 3.0 },
                    "longitudinal_velocity_delta_time": { "type": "number", "default": 0.8 },
                    "extended_polygon_policy": { "type": "string", "default": "along_path" }
                  }
                },
                "hysteresis_factor_expand_rate": { "type": "number", "default": 1.0 },
                "collision_check_yaw_diff_threshold": { "type": "number", "default": 1.578 },
                "backward_path_length": { "type": "number", "default": 30.0 },
                "forward_path_length": { "type": "number", "default": 100.0 }
              }
            }
          }
        },
        "surround_moving_obstacle_check": {
          "type": "object",
          "properties": {
            "search_radius": { "type": "number", "default": 10.0 },
            "th_moving_obstacle_velocity": { "type": "number", "default": 1.0 },
            "object_types_to_check": {
              "type": "object",
              "properties": {
                "check_car": { "type": "boolean", "default": true },
                "check_truck": { "type": "boolean", "default": true },
                "check_bus": { "type": "boolean", "default": true },
                "check_trailer": { "type": "boolean", "default": true },
                "check_bicycle": { "type": "boolean", "default": true },
                "check_motorcycle": { "type": "boolean", "default": true },
                "check_pedestrian": { "type": "boolean", "default": true },
                "check_unknown": { "type": "boolean", "default": false }
              }
            }
          }
        },
        "debug": {
          "type": "object",
          "properties": {
            "print_debug_info": { "type": "boolean", "default": false }
          }
        }
      }
    }
  },
  "properties": {
    "/**": {
      "type": "object",
      "properties": {
        "ros__parameters": {
          "$ref": "#/definitions/start_planner"
        }
      },
      "required": ["ros__parameters"]
    }
  },
  "required": ["/**"]
}
