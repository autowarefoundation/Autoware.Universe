<?xml version="1.0"?>
<launch>
  <!-- input topic name -->
  <arg name="input/img_fl" default="/cam_front_left/raw"/>
  <arg name="input/img_f" default="/cam_front/raw"/>
  <arg name="input/img_fr" default="/cam_front_right/raw"/>
  <arg name="input/img_bl" default="/cam_back_left/raw"/>
  <arg name="input/img_b" default="/cam_back/raw"/>
  <arg name="input/img_br" default="/cam_back_right/raw"/>
  <arg name="output/boxes" default="boxes"/>

  <arg name="data_path" default="$(env HOME)/autoware_data/autoware_tensorrt_bevdet"/>
  <arg name="onnx_file" default="$(var data_path)/bevdet_one_lt_d.onnx"/>
  <arg name="engine_file" default="$(var data_path)/bevdet_one_lt_d.engine"/>
  <arg name="cam_config" default="$(find-pkg-share autoware_tensorrt_bevdet)/config/cams_param.yaml"/>
  <arg name="model_config" default="$(find-pkg-share autoware_tensorrt_bevdet)/config/bevdet_r50_4dlongterm_depth.yaml"/>
  <arg name="param_file" default="$(find-pkg-share autoware_tensorrt_bevdet)/config/bevdet.param.yaml"/>

  <!-- bevdet node -->
  <node pkg="autoware_tensorrt_bevdet" exec="autoware_tensorrt_bevdet_node" name="tensorrt_bevdet_node" output="screen">
    <!-- ros topic name -->
    <remap from="~/input/topic_img_fl" to="$(var input/img_fl)"/>
    <remap from="~/input/topic_img_f" to="$(var input/img_f)"/>
    <remap from="~/input/topic_img_fr" to="$(var input/img_fr)"/>
    <remap from="~/input/topic_img_bl" to="$(var input/img_bl)"/>
    <remap from="~/input/topic_img_b" to="$(var input/img_b)"/>
    <remap from="~/input/topic_img_br" to="$(var input/img_br)"/>

    <remap from="~/output/boxes" to="$(var output/boxes)"/>

    <param name="onnx_file" value="$(var onnx_file)"/>
    <param name="engine_file" value="$(var engine_file)"/>
    <param name="cam_config" value="$(var cam_config)"/>
    <param name="model_config" value="$(var model_config)"/>
    <param from="$(var param_file)"/>
  </node>
</launch>
