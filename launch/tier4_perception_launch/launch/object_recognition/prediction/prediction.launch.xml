<?xml version="1.0"?>
<launch>
  <arg name="use_vector_map" default="false" description="use vector map in prediction"/>
  <arg name="param_path" default="$(find-pkg-share map_based_prediction)/config/map_based_prediction.param.yaml"/>
  <arg name="use_tracking_merger" default="false" description="flag to use tracking merger in prediction"/>
  <arg name="output_topic" default="/perception/object_recognition/objects"/>

  <!-- if use_tracking_merger is true, remap input topics -->
  <arg name="default_tracking_objects" default="/perception/object_recognition/tracking/objects"/>
  <arg name="merged_tracking_objects" default="/perception/object_recognition/tracking/merged/objects"/>
  <let name="input_topic_to_prediction" value="$(var merged_tracking_objects)" if="$(var use_tracking_merger)"/>
  <let name="input_topic_to_prediction" value="$(var default_tracking_objects)" unless="$(var use_tracking_merger)"/>

  <group if="$(var use_vector_map)">
    <set_remap from="objects" to="/perception/object_recognition/objects"/>
    <include file="$(find-pkg-share map_based_prediction)/launch/map_based_prediction.launch.xml">
      <arg name="output_topic" value="$(var output_topic)"/>
      <arg name="input_topic" value="$(var input_topic_to_prediction)"/>
      <arg name="param_path" value="$(var object_recognition_prediction_map_based_prediction_param_path)"/>
    </include>
  </group>
  <group unless="$(var use_vector_map)">
    <!-- Not support without vector map -->
  </group>
</launch>
