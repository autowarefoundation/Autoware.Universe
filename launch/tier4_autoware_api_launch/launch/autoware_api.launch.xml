<launch>
  <!-- AD API options -->
  <arg name="launch_default_ad_api" default="true"/>
  <arg name="launch_rviz_adaptors" default="true"/>

  <!-- external api options -->
  <arg name="launch_path_distance_calculator" default="false"/>
  <arg name="launch_calibration_status_api" default="false"/>
  <arg name="launch_start_api" default="true"/>

  <!-- rosbridge options -->
  <arg name="rosbridge_enabled" default="false"/>
  <arg name="rosbridge_respawn" default="true"/>
  <arg name="rosbridge_max_message_size" default="1000000000" />

  <!-- AD API -->
  <group>
    <include file="$(find-pkg-share default_ad_api)/launch/default_ad_api.launch.py" if="$(var launch_default_ad_api)"/>
    <include file="$(find-pkg-share ad_api_adaptors)/launch/rviz_adaptors.launch.xml" if="$(var launch_rviz_adaptors)"/>
  </group>

  <!-- awapi (deprecated) -->
  <group>
    <include file="$(find-pkg-share awapi_awiv_adapter)/launch/awapi_awiv_adapter.launch.xml"/>
  </group>

  <!-- autoware api adaptor -->
  <group>
    <push-ros-namespace namespace="autoware_api"/>
    <include file="$(find-pkg-share tier4_autoware_api_launch)/launch/include/external_api_adaptor.launch.py">
      <arg name="launch_calibration_status_api" value="$(var launch_calibration_status_api)"/>
      <arg name="launch_start_api" value="$(var launch_start_api)"/>
    </include>
    <include file="$(find-pkg-share tier4_autoware_api_launch)/launch/include/internal_api_adaptor.launch.py"/>
    <include file="$(find-pkg-share tier4_autoware_api_launch)/launch/include/internal_api_relay.launch.xml"/>
  </group>

  <!-- autoware api utils -->
  <group>
    <push-ros-namespace namespace="autoware_api/utils"/>
    <include file="$(find-pkg-share path_distance_calculator)/launch/path_distance_calculator.launch.xml" if="$(var launch_path_distance_calculator)"/>
  </group>

  <!-- rosbridge -->
  <group if="$(var rosbridge_enabled)">
    <include file="$(find-pkg-share rosbridge_server)/launch/rosbridge_websocket_launch.xml">
      <arg name="respawn" value="$(var rosbridge_respawn)"/>
      <arg name="max_message_size" value="$(var rosbridge_max_message_size)"/>
    </include>
  </group>
</launch>
