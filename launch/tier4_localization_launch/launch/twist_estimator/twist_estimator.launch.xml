<?xml version="1.0"?>
<launch>
  <arg name="localization_mode" default="lidar" description="select localization mode. lidar, gnss"/>
  <arg name="use_eagleye_twist" default="false" description="Mode to correct wheel speed and IMU by GNSS Doppler velocity"/>

  <include file="$(find-pkg-share gyro_odometer)/launch/gyro_odometer.launch.xml" unless="$(var use_eagleye_twist)">
    <arg name="input_vehicle_twist_with_covariance_topic" value="/sensing/vehicle_velocity_converter/twist_with_covariance"/>
    <arg name="output_twist_with_covariance_topic" value="/localization/twist_estimator/twist_with_covariance"/>
    <arg name="output_twist_with_covariance_raw_topic" value="/localization/twist_estimator/twist_with_covariance_raw"/>
  </include>

  <group unless="$(eval &quot;'$(var localization_mode)'=='gnss'&quot;)">
    <group if="$(var use_eagleye_twist)">
      <include file="$(find-pkg-share tier4_localization_launch)/launch/eagleye/eagleye_rt.launch.xml">
        <arg name="localization_mode" value="$(var localization_mode)"/>
        <arg name="use_eagleye_twist" value="$(var use_eagleye_twist)"/>
        <arg name="output_twist_with_cov_name" value="/localization/twist_estimator/twist_with_covariance"/>
      </include>
    </group>
  </group>
</launch>
