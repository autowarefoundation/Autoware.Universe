nodes:
  #rslidar driver   node
  - id: rslidar_driver
    custom:
      source: ../../dora-hardware/vendors/lidar/build/rslidar_driver_pcap
      # source: ../../dora-hardware/dora_to_ros2/lidar/build/rslidar_driver_pcap
      inputs:
        tick: dora/timer/millis/100
      outputs:
        - pointcloud

  # - id: show_input_pointcloud
  #   operator:
  #       python: ../../dora-hardware/vendors/lidar/lidar_to_ros2.py
  #       inputs:
  #         pointcloud: rslidar_driver/pointcloud 
# 去地面
  - id: ground_filter
    custom:
      source: ../patchwork-plusplus-ros-master/build/demo
      inputs:
        pointcloud: rslidar_driver/pointcloud 
      outputs:
        - pointcloud_no_ground

  - id: show_pointcloud_no_ground
    operator:
        python: ../patchwork-plusplus-ros-master/lidar_to_ros2.py
        inputs:
          pointcloud: ground_filter/pointcloud_no_ground
          
  # 聚类
  - id: euclidean_cluster
    custom:
      source: build/euclidean_cluster
      inputs:
        pointcloud: ground_filter/pointcloud_no_ground
      outputs:
        - LidarRawObject
        - rgb_pointcloud

  - id: show_pointcloud_euclidean_cluster
    operator:
        # python: lidar_to_ros2_euclidean_cluster_detect.py
        python: rgb_pointcloud_to_ros2.py
        inputs:
          pointcloud: euclidean_cluster/rgb_pointcloud
          
  - id: show_LidarRawObject
    operator:
        # python: lidar_to_ros2_euclidean_cluster_detect.py
        python: LidarRawObject_to_ros2.py
        inputs:
          pointcloud: euclidean_cluster/LidarRawObject
