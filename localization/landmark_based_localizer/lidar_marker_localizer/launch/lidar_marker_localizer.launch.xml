<launch>
  <!-- Topics -->
  <arg name="input/pointcloud" default="/sensing/lidar/top/rectified/pointcloud_ex" description="input topic name"/>
  <arg name="output/pointcloud" default="filtered/pointcloud_ex" description="final output topic name"/>

  <!-- container -->
  <arg name="use_pointcloud_container" default="True" description="launch pointcloud container"/>
  <arg name="pointcloud_container_name" default="/pointcloud_container" description="container name"/>

  <!-- option -->
  <arg name="use_intra_process" default="true" description="use ROS 2 component container communication"/>

  <arg name="param_file" default="$(find-pkg-share lidar_marker_localizer)/config/lidar_marker_localizer.param.yaml"/>

  <!-- <arg name="param_file" default="$(find-pkg-share lidar_marker_localizer)/config/lidar_marker_localizer.param.yaml"/> -->

  <group>
    <include file="$(find-pkg-share lidar_marker_localizer)/launch/util.launch.py">
      <arg name="input/pointcloud" value="$(var input/pointcloud)"/>
      <arg name="output/pointcloud" value="$(var output/pointcloud)"/>
      <arg name="use_pointcloud_container" value="$(var use_pointcloud_container)"/>
      <arg name="pointcloud_container_name" value="$(var pointcloud_container_name)"/>
      <arg name="use_intra_process" value="$(var use_intra_process)"/>
    </include>
  </group>

  <node pkg="lidar_marker_localizer" exec="lidar_marker_localizer" name="lidar_marker_localizer" output="log">
    <!-- <param from="$(var param_file)"/> -->
    <remap from="input/pointcloud_ex" to="ring_filter/pointcloud_ex"/>

    <param from="$(var param_file)"/>
  </node>
</launch>
