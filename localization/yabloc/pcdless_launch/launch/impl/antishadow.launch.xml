<launch>
    <arg name="use_sim_time" default="true"/>
    <arg name="log_level" default="warn"/>

    <arg name="resized_image" default="/sensing/camera/undistorted/image_raw"/>
    <arg name="resized_info" default="/sensing/camera/undistorted/camera_info"/>

    <arg name="min_segment_length" default="-1.0"/>
    <arg name="max_segment_distance" default="-1.0"/>
    <arg name="max_lateral_distance" default="-1.0"/>


    <!-- segment_accumulator -->
    <node name="accumulator" pkg="segment_accumulator" exec="segment_accumulator_node" output="screen" args="--ros-args --log-level warn">
        <param name="use_sim_time" value="$(var use_sim_time)"/>
        <param name="default_map_value" value="10"/>
        <remap from="$(var src_image)" to="$(var resized_image)"/>
        <remap from="/localization/imgproc/camera_info" to="$(var resized_info)"/>
        <remap from="/localization/imgproc/lsd_cloud" to="/localization/imgproc/filtered_lsd"/>
    </node>

    <!-- dynamic remover -->
    <node name="dynamic_remover" pkg="dynamic_remover" exec="dynamic_remover_node" output="screen" args="--ros-args --log-level warn">
        <param name="use_sim_time" value="$(var use_sim_time)"/>
        <remap from="$(var src_image)" to="$(var resized_image)"/>
        <remap from="/localization/imgproc/camera_info" to="$(var resized_info)"/>
        <param name="polygon_thic" value="5"/>
        <param name="gap_threshold" value="1000.0"/>
    </node>

    <!-- corrector -->
    <node name="antishadow_corrector" pkg="antishadow_corrector" exec="antishadow_corrector" output="screen" args="--ros-args --log-level info">
        <param name="use_sim_time" value="$(var use_sim_time)"/>
        <param name="visualize" value="true"/>
        <remap from="/localization/imgproc/predicted_particles" to="/localization/pf/predicted_particles"/>
        <remap from="/localization/imgproc/weighted_particles" to="/localization/pf/weighted_particles"/>
        <param name="score_min" value="00.0" />
        <param name="score_max" value="50.0" />
    </node>

</launch>